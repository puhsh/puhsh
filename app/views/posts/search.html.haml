- content_for :title do
  %title= "Posts"

- content_for :header do
  = render 'shared/header'

%section.row
  %article.small-4.columns#search
    %form(action=search_posts_path)
      .row
        .medium-10.small-12.columns
          = text_field_tag 'query', @term, type: 'search', results: 0
  %article.small-5.end.columns
    %h3= "Search Results for '#{@term}'"
%section.row
  %article.small-12.columns.text-center.item-container.js-grid-list.js-infinite#posts
    - @posts.each do |post|
      - image = post.post_images.first
      %article.item.post-grid-item#post(itemscope itemtype='http://schema.org/Product')
        %a(href="#{post_path(post, city_id: post.city.slug, user_id: post.user.slug)}")
          - if image.image_file_name.present?
            = image_tag image.image.url(:medium)
          - else
            = image_tag 'http://placehold.it/200x200'
          %p.title(itemprop='name')= post.title
          %p(itemprop='description')= post.description
          #price-container(itemprop='offers' itemscope itemtype='http://schema.org/Offer')
            %span.label.price(itemprop='price')= post_price(post.item)
    = link_to_next_page @posts, 'Next', class: 'infinite-more-link hide', href: "/posts/search/?page=#{@posts.current_page + 1}&query=#{@term}"
